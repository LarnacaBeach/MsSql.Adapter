<Project Sdk="Microsoft.NET.Sdk.Web">
  <PropertyGroup>
    <TargetFramework>net6.0</TargetFramework>
	<LangVersion>Latest</LangVersion>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
	<IsPackable>false</IsPackable>
	<UserSecretsId>a42e72e6-d5bf-4465-8269-3fcae94ea073</UserSecretsId>
  </PropertyGroup>
	
  <!-- Write the generated files to disk and include them in the compiler. -->
  <PropertyGroup>
	<IncludePackageReferencesDuringMarkupCompilation>true</IncludePackageReferencesDuringMarkupCompilation>
	<EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>
	<CompilerGeneratedFilesOutputPath>GeneratedFiles</CompilerGeneratedFilesOutputPath>
  </PropertyGroup>
  <Target Name="RemoveSourceGeneratedFiles" BeforeTargets="BeforeBuild">
	<ItemGroup>
	  <Compile Remove="GeneratedFiles\**" />
	</ItemGroup>
  </Target>

  <ItemGroup>
    <None Remove="protos\protobuf-net\bcl.proto" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="protos\protobuf-net\bcl.proto">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
  </ItemGroup>

  <ItemGroup>
	<PackageReference Include="Grpc.AspNetCore.Web" Version="2.42.0" />
	<PackageReference Include="Microsoft.Extensions.Configuration.UserSecrets" Version="5.0.0" />
	<PackageReference Include="protobuf-net.Grpc.AspNetCore" Version="1.0.152" />
	<PackageReference Include="protobuf-net.Grpc.AspNetCore.Reflection" Version="1.0.152" />
	<PackageReference Include="protobuf-net.Grpc" Version="1.0.152" />
	<PackageReference Include="protobuf-net.Grpc.Reflection" Version="1.0.152" />
	<PackageReference Include="Serilog" Version="2.10.0" />
	<PackageReference Include="Serilog.AspNetCore" Version="4.1.0" />
	<PackageReference Include="Serilog.Sinks.Console" Version="4.0.1" />
	<PackageReference Include="System.Configuration.ConfigurationManager" Version="6.0.0" />
	<PackageReference Include="System.ServiceModel.Primitives" Version="4.9.0" />
  </ItemGroup>

  <ItemGroup>
	<ProjectReference Include="..\..\src\shared\mssql.utils\mssql.utils.csproj" />
	<ProjectReference Include="..\..\src\shared\standard.types\standard.types.csproj" />
	<ProjectReference Include="..\..\src\thirdparty\Grpc.AspNetCore.HealthChecks\Grpc.AspNetCore.HealthChecks.csproj" />
  </ItemGroup>

  <ItemGroup>
    <!--<PackageReference Include="Mssql.Adapter.Generator" Version="1.0.0" PrivateAssets="all" ExcludeAssets="runtime" />-->
	<ProjectReference Include="..\..\src\mssql.adapter.generator\mssql.adapter.generator.csproj" OutputItemType="Analyzer" ReferenceOutputAssembly="false" />
	<ProjectReference Include="..\..\src\mssql.adapter.generator.attributes\mssql.adapter.generator.attributes.csproj" OutputItemType="Analyzer" ReferenceOutputAssembly="true" />
	<ProjectReference Include="..\..\src\shared\mssql.collector.types\mssql.collector.types.csproj" OutputItemType="Analyzer" ReferenceOutputAssembly="false" />
  </ItemGroup>
</Project>
